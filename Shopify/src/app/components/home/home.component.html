<div>
  <div class="container row">
    @for(product of products(); track product.id) {
      <p-card class="product-card">

        <p-carousel
          [value]="product.media || []"
          [numVisible]="1"
          [numScroll]="1"
          [autoplayInterval]="3000"
          styleClass="custom-carousel"
        >      
          <ng-template pTemplate="item" let-media>
            <ng-container>
              @if (isVideo(media)) {
                <video
                  [src]="media.url"
                  class="card-media"
                  style="width: 100%; height: 200px; object-fit: cover; border-radius: 5px"
                  controls
                ></video>
              }
              @else {
                <img
                  [src]="media.url"
                  alt="Product media"
                  class="card-media"
                  style="width: 100%; height: 200px; object-fit: cover; border-radius: 5px"
                />
              } 
            </ng-container>
          </ng-template>
        </p-carousel>

        <ng-template #title>{{ product.title }}</ng-template>
        <ng-template #subtitle>{{ product.categoryName }}</ng-template>

        <p>توضیحات: {{ product.description || "-" }}</p>
        <p>قیمت: {{ product.price | number }}</p>
        <p>موجودی: {{ product.stock }}</p>

        <ng-template #footer>
          <div class="row">
            <p-button
              label="خرید"
              class="col-md-3"
              (click)="buyProduct(product.id)"
              [disabled]="product.stock <= 0"
            ></p-button>
          </div>
        </ng-template>

      </p-card>
    } 
  </div>
</div>

     <!-- <div class="search-box">
      <p-inputicon class="pi pi-search"></p-inputicon>
      <input type="text" pInputText placeholder="Search" />
    </div> -->