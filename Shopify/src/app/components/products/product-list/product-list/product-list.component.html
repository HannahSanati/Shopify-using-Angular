<p-table [value]="productsQuery.data() || []" dataKey="id">
  <ng-template pTemplate="header">
    <tr>
      <th>عنوان</th>
      <th>دسته</th>
      <th>قیمت</th>
      <th>موجودی</th>
      <th>وضعیت</th>
      <th>عملیات</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-product>
    <tr>
      <td>{{ product.title }}</td>
      <td>{{ product.categoryName }}</td>
      <td>{{ product.price | number }}</td>
      <td>{{ product.stock }}</td>
      <td>
        <p-tag
          [value]="
            product.condition
              ? product.condition === 'new'
                ? 'نو'
                : 'دست دوم'
              : ' - '
          "
          [severity]="product.condition === 'new' ? 'success' : 'warning'"
        >
        </p-tag>
      </td>
      <td class="row">
        <button
          pButton
          label="حذف"
          class="p-button-danger col-3"
          (click)="deleteProduct(product.id)"
        ></button>

        <button
          pButton
          label="ویرایش"
          class="p-button-warning col-3"
          (click)="editProduct(product)"
        ></button>

        <button
          pButton
          label="جزئیات"
          class="p-button-info col-3"
          (click)="toggleExpanded(product.id)"
        ></button>
      </td>
    </tr>

    <tr *ngIf="expanded() === product.id">
      <td colspan="6">
        <ul>
          <li *ngFor="let attr of product.attributeValues">
            {{ attr.attributeName }}: {{ attr.value }}
          </li>
        </ul>
      </td>
    </tr>
  </ng-template>
</p-table>

<!--   template: `
    @if (todos.isPending()) {
      <span>Loading...</span>
    } @else if (todos.isError()) {
      <span>Error: {{ todos.error()?.message }}</span>
    } @else {
      @for (todo of todos.data(); track todo.id) {
        <li>{{ todo.title }}</li>
      } @empty {
        <li>No todos found</li>
      }
    }
  `, -->
